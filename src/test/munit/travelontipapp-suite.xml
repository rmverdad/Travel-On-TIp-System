<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="travelontipapp-suite.xml" />
	<munit:test name="travelontipapp_schedules_flow-test" doc:id="3ac35f0e-472b-460f-a391-d5b16fc01300" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock setVar" doc:id="0e9cf41b-cc82-4f9a-b5aa-e86c11550dff" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0cfb63ff-aa27-4348-9307-e18b79c10149" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="serviceType" value="#[output application/java --- readUrl('classpath://travelontipappflowtest\mock_variable_.dwl')]" mediaType="application/java" encoding="UTF-8" />
						<munit-tools:variable key="transactionId" value="#[output application/java --- readUrl('classpath://travelontipappflowtest\mock_variable_1.dwl')]" mediaType="application/java" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy getSchedules" doc:id="d348d5cd-6b55-4236-bae6-b1ef500404d2" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="5cd7954a-1fdd-48a2-9f89-1e0983b36839" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="abbbefb8-0d7a-4bca-aa32-262cbfda4209" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipappflowtest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="642def14-8ead-4545-9c01-26098f1be83d" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipappflowtest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="16222b36-4c2f-44ff-b315-5896d789150a" >
				<munit:payload value="#[readUrl('classpath://travelontipappflowtest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://travelontipappflowtest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to travelontipapp_flow" doc:id="f4af06c0-0eaa-4cc4-97d5-dd8a9fe6e376" name="travelontipapp_flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="ebae3b2f-946e-42be-8072-c4da9e104acc" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipappflowtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="46237e51-9b47-4ce2-9a75-c47354aa8a92" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="d448ee69-adae-4b9b-a976-745bdf2f40d6" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="454312d8-a563-4455-b582-2297a495e353" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="06c4fb55-bdef-4a64-995d-bf2b82eb7909" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify getSchedules" doc:id="6f95527f-fec9-4800-8c6d-70bbe043b184" processor="flow-ref" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="5cd7954a-1fdd-48a2-9f89-1e0983b36839" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="travelontipapp_routes_flow-test" doc:id="c7664de4-0203-4b4e-bfbf-5b601644b4a4" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock setVar" doc:id="dd6e649f-e2dd-46f1-8bba-5dd6356d67cb" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0cfb63ff-aa27-4348-9307-e18b79c10149" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="serviceType" value="#[output application/java --- readUrl('classpath://travelontipapproutesflowtest\mock_variable_.dwl')]" mediaType="application/java" encoding="UTF-8" />
						<munit-tools:variable key="transactionId" value="#[output application/java --- readUrl('classpath://travelontipapproutesflowtest\mock_variable_1.dwl')]" mediaType="application/java" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:spy doc:name="Spy getRoutes" doc:id="abc0c77e-4a9f-4ec6-8774-c607aa0515c9" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3e16f6d2-0590-490f-868f-326b06bf9762" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:before-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="11f90188-58d0-4633-ad3a-88005394e280" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipapproutesflowtest::spy_assert_payload
---
spy_assert_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:before-call>
				<munit-tools:after-call >
					<munit-tools:assert doc:name="Assert payload" doc:id="1770d93c-9587-4038-9cd0-526f390fffe7" message="The payload does not match">
						<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipapproutesflowtest::spy_assert_payload1
---
spy_assert_payload1::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
					</munit-tools:assert>
				</munit-tools:after-call>
			</munit-tools:spy>
			<munit:set-event doc:name="Set Input" doc:id="2f054b20-c1cf-4206-872d-e472c001cbda" >
				<munit:payload value="#[readUrl('classpath://travelontipapproutesflowtest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://travelontipapproutesflowtest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to travelontipapp_flow" doc:id="b9a43f76-932d-4cd2-8ddb-ecf4d4b1a253" name="travelontipapp_flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="7aa19167-bc75-4dd6-b8c6-71f17c98a5a5" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipapproutesflowtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="c820a77a-17f8-468b-9e44-c85ade98538b" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="d448ee69-adae-4b9b-a976-745bdf2f40d6" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="da91573c-6687-4941-a18f-5fd035a56d7d" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="06c4fb55-bdef-4a64-995d-bf2b82eb7909" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify getRoutes" doc:id="7b8cfb76-64f2-430f-818d-b0e39425fc2f" processor="flow-ref" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="3e16f6d2-0590-490f-868f-326b06bf9762" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test name="travelontipapp_default_flow-test" doc:id="6c0ef6e7-7d3c-42f2-9f0b-e6654066974c" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock setVar" doc:id="9c5cac47-3cba-4135-a41b-4ae49842784d" processor="flow-ref">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="0cfb63ff-aa27-4348-9307-e18b79c10149" attributeName="doc:id" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="serviceType" value="#[output application/java --- readUrl('classpath://travelontipappdefaultflowtest\mock_variable_.dwl')]" mediaType="application/java" encoding="UTF-8" />
						<munit-tools:variable key="transactionId" value="#[output application/java --- readUrl('classpath://travelontipappdefaultflowtest\mock_variable_1.dwl')]" mediaType="application/java" encoding="UTF-8" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit:set-event doc:name="Set Input" doc:id="b6f8611e-b136-4fcb-9381-3cee6cb6c020" >
				<munit:payload value="#[readUrl('classpath://travelontipappdefaultflowtest\set-event_payload.dwl')]" encoding="UTF-8" />
				<munit:attributes value="#[readUrl('classpath://travelontipappdefaultflowtest\set-event_attributes.dwl')]" />
			</munit:set-event>
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="Flow-ref to travelontipapp_flow" doc:id="eef8fde9-e5cb-4483-93f1-8204ddf65258" name="travelontipapp_flow"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert doc:name="Assert payload" doc:id="f526fe6c-efcc-40e3-aa75-025eb83ff137" message="The payload does not match">
				<munit-tools:that ><![CDATA[#[%dw 2.0
import travelontipappdefaultflowtest::assert_expression_payload
---
assert_expression_payload::main({payload: payload, attributes: attributes, vars: vars})]]]></munit-tools:that>
			</munit-tools:assert>
			<munit-tools:verify-call doc:name="Verify Transform Message" doc:id="670ae2de-a764-4eb5-b1b2-0b696cfa650c" processor="ee:transform" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="e2828b6b-5b70-4235-b5d6-bf7780a2d53b" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="aaf91870-1506-49c3-be6d-cf6100796e9f" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="d448ee69-adae-4b9b-a976-745bdf2f40d6" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
			<munit-tools:verify-call doc:name="Verify Logger" doc:id="7f011e10-d0ca-4622-812c-6db59b4cf949" processor="logger" times="1">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="06c4fb55-bdef-4a64-995d-bf2b82eb7909" attributeName="doc:id" />
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>


</mule>
